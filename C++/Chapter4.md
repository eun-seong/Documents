# [Chapter 4] ë³µì‚¬ ìƒì„±ìì™€ ì„ì‹œ ê°ì²´
## ìš©ì–´
ë³µì‚¬ ìƒì„±ì :    
ê¹Šì€ ë³µì‚¬ :    
ì–•ì€ ë³µì‚¬ :    
ì„ì‹œ ê°ì²´ :    
ì´ë™ ì‹œë§¨í‹± :    
* * *
## ë³µì‚¬ ìƒì„±ì
ê°ì²´ì˜ ë³µì‚¬ë³¸ì„ ìƒì„±í•  ë•Œ í˜¸ì¶œë˜ëŠ” ìƒì„±ì   
ë””í´íŠ¸ ë³µì‚¬ ìƒì„±ì : ë³µì‚¬ ìƒì„±ìë¥¼ ìƒëµí•˜ë©´ ë””í´íŠ¸ ìƒì„±ìì²˜ëŸ¼ ì»´íŒŒì¼ëŸ¬ê°€ 'ì•Œì•„ì„œ' ë§Œë“¤ì–´ ì¤Œ   
í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ë©¤ë²„ ë³€ìˆ˜ì— í¬ì¸í„° ë³€ìˆ˜ë¥¼ ë™ì  í• ë‹¹ ë° í•´ì œí•  ê²½ìš° ì¡°ì‹¬í•´ì•¼ í•¨   
#### ë³µì‚¬ ìƒì„±ìê°€ í˜¸ì¶œë˜ëŠ” ê²½ìš°
1. ëª…ì‹œì ìœ¼ë¡œ ê°ì²´ì˜ ë³µì‚¬ë³¸ì„ ìƒì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„ ì–¸   
2. í•¨ìˆ˜ í˜•íƒœë¡œ í˜¸ì¶œ : ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš©
3. í•¨ìˆ˜ í˜•íƒœë¡œ í˜¸ì¶œ : ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©
```c++
// ë§¤ê°œë³€ìˆ˜ê°€ ìƒìˆ˜í˜• ì°¸ì¡°
í´ë˜ìŠ¤ì´ë¦„(const í´ë˜ìŠ¤ì´ë¦„ &rhs);
```
#### ë³µì‚¬ ìƒì„±ì ì°¨ë‹¨ ë°©ë²•
1. ëª…ì‹œì ìœ¼ë¡œ ë³µì‚¬ ìƒì„±ì ì‚­ì œ
    ```c++
    ...
    Class(const Class& rhs) = delete;
    ...
    ```
2. í˜¸ì¶œ í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì°¸ì¡°í˜•ìœ¼ë¡œ (ğŸ‘ì¶”ì²œ ë°©ì‹)     
    ë§¤ê°œë³€ìˆ˜ëŠ” **ê¼­**`const`í˜•ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤.
    ```c++
    void function(const Class& param){
        // ë§¤ê°œë³€ìˆ˜ê°€ ì°¸ì¡°í˜•ì´ë¯€ë¡œ ê°ì²´ê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤.
        param.setData(20);  // ì›ë³¸ ê°ì²´ ìˆ˜ì •
    }
    ```
### í•¨ìˆ˜ í˜¸ì¶œê³¼ ë³µì‚¬ ìƒì„±ìì˜ ë¬¸ì œì 
1. í´ë˜ìŠ¤ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ê²½ìš°   
    ```c++
    void function(Class param){
        // param ê°ì²´ì˜ ë³µì‚¬ ìƒì„±ìê°€ í˜¸ì¶œë˜ì–´ ê°ì²´ê°€ ìƒì„±ëœë‹¤.
        param.setData(2);   // ë‹¹ì—°íˆ ì›ë³¸ì€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.
        // param ê°ì²´ê°€ ì†Œë©¸í•œë‹¤.
    }
    ```
    => ì°¸ì¡°í˜• ë§¤ê°œë³€ìˆ˜ë¡œ í•´ê²° ê°€ëŠ¥
2. í´ë˜ìŠ¤ë¥¼ ë°˜í™˜ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°
    ```c++
    
    ```
### ì–•ì€ ë³µì‚¬
ëŒ€ìƒì´ ë˜ëŠ” ê°’ í•˜ë‚˜ì— ì ‘ê·¼ í¬ì¸í„°ê°€ ë‘˜ì´ ë˜ëŠ” ê²ƒ   
í´ë˜ìŠ¤ì— í¬ì¸í„° ë©¤ë²„ë³€ìˆ˜ê°€ ìˆê³  ë©”ëª¨ë¦¬ ë™ì  í• ë‹¹ ë° í•´ì œí•  ê²½ìš° ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ ìˆë‹¤.   
ì˜ˆì œ) aì™€ bì˜ ë©¤ë²„ í¬ì¸í„° ë³€ìˆ˜ê°€ í•˜ë‚˜ì˜ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë¨
```c++
class mClass{
    mClass(int param){
        mData = new int;
        *mData = param;
    }
    
    ~mClass(int param){
        delete mData;
    }

    // í¬ì¸í„° ë©¤ë²„ ë°ì´í„°
    int *mData = nullprt;
};

int main(){
    mClass a(10);   // ë””í´íŠ¸ ìƒì„±ì
    mClass b(a);    // ë””í´íŠ¸ ë³µì‚¬ ìƒì„±ì
}
// ì»´íŒŒì¼ëŸ¬ê°€ ë””í´íŠ¸ ë³µì‚¬ ìƒì„±ì ë§Œë“¦
```
=> ë©”ëª¨ë¦¬ í•´ì œ ì‹œ bê°€ í•´ì œëœ í›„ aê°€ ì´ë¯¸ bê°€ í•´ì œí•œ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•˜ë ¤ê³  ì‹œë„í•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ ë°œìƒ   
### ê¹Šì€ ë³µì‚¬
ë³µì‚¬ì— ì˜í•´ ì‹¤ì œë¡œ ë‘ ê°œì˜ ê°’ì´ ìƒì„±ë˜ëŠ” ê²ƒ   
ìœ„ì˜ ì˜ˆì‹œ ë¬¸ì œ í•´ê²° ê°€ëŠ¥   
```c++
class mClass{
    mClass(int param){
        mData = new int;
        *mData = param;
    }

    mClass(const& mClass &rhs){
        mData = new int;        // ìƒˆ ê°ì²´ ìƒì„±

        *mData = *rhs.mData;    // ê°’ë§Œ ë³µì‚¬
    }
    
    ~mClass(int param){
        delete mData;
    }

    // í¬ì¸í„° ë©¤ë²„ ë°ì´í„°
    int *mData = nullprt;
};

int main(){
    mClass a(10);   // ë””í´íŠ¸ ìƒì„±ì
    mClass b(a);    // ë³µì‚¬ ìƒì„±ì 
}
```
=> ì—ëŸ¬ ì•ˆë‚¨
### ëŒ€ì… ì—°ì‚°ì
í´ë˜ìŠ¤ë¥¼ ë‹¨ìˆœ ëŒ€ì…í•˜ê²Œ ë˜ë©´ ëª¨ë“  ë©¤ë²„ì˜ ê°’ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•œë‹¤.
```c++
mClass a(10);
mClass b(20);

a = b;
// ê¹Šì€ ë³µì‚¬ê°€ ìˆ˜í–‰ë˜ì§€ ì•Šì•„ ì—ëŸ¬ ë°œìƒ   
```
#### ë‹¨ìˆœ ëŒ€ì… ì—°ì‚°ì í•¨ìˆ˜ ì •ì˜
```c++
mClass& operator=(const mClass &rhs){
    *mData = *rhs.mData;

    return *this;
}
```
* * *
## ë¬µì‹œì  ë³€í™˜
### ë³€í™˜ ìƒì„±ì
ë§¤ê°œë³€ìˆ˜ê°€ í•œ ê°œì¸ ìƒì„±ì   
ì€ê·¼ìŠ¬ì© í˜¸ì¶œë˜ëŠ” ê²½ìš°ê°€ ìˆìŒ -> ë¶ˆí•„ìš”í•œ ì„ì‹œ ê°ì²´ ìƒì„±í•¨   
```c++
class mClass{
    mClass(int nParam): mData(nParam){}
    ...
};

void function(const mClass& param){
    // í˜• ë³€í™˜ìœ¼ë¡œ ì¸í•´ ë³€í™˜ ìƒì„±ì í˜¸ì¶œ -> ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±
}

int main(){
    function(5);    // ë§¤ê°œë³€ìˆ˜ int -> mClassë¡œ í˜•ë³€í™˜
}
```
-> `function(mClass(5))` ê°€ ë˜ì–´ë²„ë¦° ì…ˆ
#### `explicit` ì˜ˆì•½ì–´
ë¬µì‹œì  ë³€í™˜ ìƒì„±ìê°€ ì‚¬ìš©ì ëª¨ë¥´ê²Œ í˜¸ì¶œë  ê°€ëŠ¥ì„±ì„ ì°¨ë‹¨
```c++
...
explicit mClass(int nParam): mData(nParam) { }
...
int main(){
    function(5);    // ì»´íŒŒì¼ ì—ëŸ¬
}
```
### í—ˆìš©ë˜ëŠ” ë³€í™˜
ë³€í™˜ ìƒì„±ìëŠ” í´ë˜ìŠ¤ë¥¼ A í˜•ì‹ìœ¼ë¡œ ë³€í™˜ë  ìˆ˜ ìˆì§€ë§Œ, A í˜•ì‹ì„ í´ë˜ìŠ¤ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ì§€ëŠ” ëª»í•¨   
-> í˜•ë³€í™˜ ì—°ì‚°ì ìƒì„±
```c++
class mClass{
    explicit mClass(int nParam): mData(nParam) { }

    // í˜•ë³€í™˜ ì—°ì‚°ì
    operator int(void) {return mData;}  
};

int main(){
    mClass a(10);
    
    cout<<a<<'\n';  // int -> mClass í˜•ë³€í™˜ì´ ë˜ì—ˆê¸° ë•Œë¬¸ì— ê°€ëŠ¥
}
```
|í˜•ë³€í™˜ ì—°ì‚°ì||
|---|---|
|`const_cast`|í˜• ë³€í™˜|
|`static_cast`|ìƒì† ê´€ë ¨|
|`dynamic_cast`|ìƒì† ê´€ë ¨|
|`reinterpret_cast`|C ìŠ¤íƒ€ì¼ì˜ í˜•ë³€í™˜((int)a) ê°€ê¸‰ì  ì“°ì§€ ì•ŠëŠ”ê²Œ ì¢‹ìŒ|
* * *
## ì´ë¦„ ì—†ëŠ” ì„ì‹œ ê°ì²´
í•¨ìˆ˜ì˜ ë¦¬í„´ íƒ€ì…ì´ í´ë˜ìŠ¤ì¸ ê²½ìš°ì— ì•„ë¬´ë„ ëª¨ë¥´ê²Œ ê°ì²´ê°€ ìƒì„±ë˜ê³  ì†Œë©¸ëœë‹¤   
#### ì¤‘ìš”
1. ì„ì‹œ ê°ì²´ì˜ ì¡´ì¬ë¥¼ ì¸ì‹í•˜ëŠ” ê²ƒ
    ```c++
    mClass function(int nParam){
        mClass a(nParam);
        
        return a;
    }

    int main(){
        mClass b(5);

        // í•¨ìˆ˜ê°€ ë¦¬í„´ë˜ë©´ì„œ ì„ì‹œ ê°ì²´ê°€ ìƒì„±ëë‹¤ê°€ ëŒ€ì… ì—°ì‚° í›„ ì†Œë©¸ëœë‹¤
        b = function(10);
    }
    ```    
2. ìƒì„± ë° ì†Œë©¸ ì‹œê¸°ë¥¼ ì •í™•í•˜ê²Œ ì¸ì‹í•˜ëŠ” ê²ƒ
    ```c++
    int main(){
        // ì„ì‹œ ê°ì²´ëŠ” main()í•¨ìˆ˜ê°€ ë¦¬í„´ëœ í›„ ì†Œë©¸í•œë‹¤
        mClass &rData = function(10);

        return 0;
    }
    ```
### r-value ì°¸ì¡°
ì—°ì‚°ì ë‹¤ì¤‘ ì •ì˜ì—ì„œ ì‚¬ìš©
```c++
class mClass{
    public:
    mClass(int param){
        this->mData = param;
    }
    
    int mData;
};

// ë§¤ê°œ ë³€ìˆ˜ê°€ r-value ì°¸ì¡° í´ë˜ìŠ¤
void testFunc(mClass &&nParam){
    cout<<"testFunc(): "<<nParam.mData<<'\n';
}

int main(){
    testFunc(mClass(10));

    return 0;
}
```
### ì´ë™ ì‹œë©˜í‹±
1. ì´ë™ ìƒì„±ì   
    ì–´ì°¨í”¼ ì‚¬ë¼ì§„ ì´ë¦„ ì—†ëŠ” ì„ì‹œ ê°ì²´ì´ë¯€ë¡œ ê¹Šì€ ë³µì‚¬ê°€ ì•„ë‹Œ ì–•ì€ ë³µì‚¬ë¥¼ ìˆ˜í–‰
    ```c++
    class mClass{
        ...
        // ì´ë™ ìƒì„±ì
        // ë§¤ê°œë³€ìˆ˜ê°€ r-value ì°¸ì¡°
        mClass(mClass &&rhs): mData(rhs.mData){ }
        ...
    };

    mClass testFunc(int nParam){
        mClass a;
        a.setData(nParam);

        return a;
    }

    int main(){
        mClass b;

        b = testFunc(20);   // ì´ë™ ìƒì„±ì í˜¸ì¶œ
        mClass c(b);        // ë³µì‚¬ ìƒì„±ì í˜¸ì¶œ

        return 0;
    }
    ```
2. ì´ë™ ëŒ€ì… ì—°ì‚°ì   
    [ëŒ€ì… ì—°ì‚°ì](#ëŒ€ì…-ì—°ì‚°ì)
